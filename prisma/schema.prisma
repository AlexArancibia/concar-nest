generator client {
  provider = "prisma-client-js"
  previewFeatures = ["fullTextSearchPostgres"]
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL") // uses a direct connection
}
 

enum UserRole {
  ADMIN
  MANAGER
  EDITOR
  CUSTOMER_SERVICE
}
 

enum AuthProvider {
  EMAIL
  GOOGLE
  FACEBOOK
  TWITTER
  APPLE
  GITHUB
  CUSTOM
}

// Modelo para usuarios (admin, managers, editors, etc.) con soporte para múltiples proveedores de autenticación
model User {
  id                String      @id @default(dbgenerated("'user_' || substr(gen_random_uuid()::text, 1, 13)"))
  email             String      @unique // Email address of the user
  emailVerified     DateTime?   // Fecha de verificación del email
  password          String?     // Hashed password (opcional para auth con proveedores externos)
  image             String?     // URL de la imagen de perfil
  firstName         String      // First name of the user
  lastName          String      // Last name of the user
  role              UserRole    // Role of the user in the system
  
  // Campos para autenticación con proveedores externos
  authProvider      AuthProvider @default(EMAIL) // Proveedor de autenticación
  authProviderId    String?      // ID único del usuario en el proveedor externo
  accessToken       String?      // Token de acceso (encriptado)
  refreshToken      String?      // Token de actualización (encriptado)
  tokenExpiresAt    DateTime?    // Fecha de expiración del token
  
  // Campos adicionales
  phone             String?      // Número de teléfono
  bio               String?      // Biografía o descripción
  preferences       Json?        // Preferencias del usuario (tema, notificaciones, etc.)
  lastLogin         DateTime?    // Última fecha de inicio de sesión
  failedLoginAttempts Int?       // Intentos fallidos de inicio de sesión
  lockedUntil       DateTime?    // Bloqueo temporal de cuenta
  
  // Timestamps
  createdAt         DateTime    @default(now())
  updatedAt         DateTime    @updatedAt

 
}
  